<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>使用jekyll写博客</title>
	<meta name="author" content="">
	<link href='/stylesheet/css/style.css' rel="stylesheet" media="Screen">
	<link href="http://brucebot.com/atom.xml" rel="alternate" title="使用jekyll写博客" type="application/atom+xml">
	<link rel="canonical" href="http://www.brucebot.com/" />
	<meta name="description" content="Staubli Robot Technical Support,Robotics Tracking painting, Robotics Cutting, Scoring, Robotics SemiConductor Wafer Transfering. Staubli Robot(V+, VAL3), DeviceNet, Modbus, Profibus, WAGO,Automation, Simulation" />
	<meta name="keywords" content="工业机器人，史陶比尔机器人，KUKA机器人，industrial robot, Staubli Robot, Kuka robot, ABB robot,ABB工业机器人,机器人切削,机器人激光,V+,VAL3,RAPID,FAMOS,Robotworks,Robot Studio" />
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29122907-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masterhead">
			<div id="branding" role="banner">
				<h1 id="site-title"><span><a href="/">于仁颇黎</a><span></h1>
				<div id="site description">工业机器人从业者,观察者</div>
			</div><!-- #branding -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">
		<div id="container">
			<div id="content" role="main">
			<div class="entry-content">
					<div class="content">
<header>
<div class="unit-head">
<div class="unit-inner unit-head-inner">
<h1 class="h2 entry-title">使用jekyll写博客</h1>
<div class="entry-meta">
发布: 
<span>2012-03-30</span>
|
<span>作者:<a href="http://brucebot.com">于仁颇黎</a></span>
</div>
<div class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="0" data-show-email="0" data-orientation="0" data-version="1"></div><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
</div><!-- unit-inner -->
</div><!-- unit-head -->
</header>

<div class="bd">
<div class="entry-content">
<ul>
<li>2012-03-30 初成</li>
<li>2012-04-17 完成jekyll分页显示和自动摘要</li>
<li>2012-04-25 增加源码链接</li>
<li>2012-06-29 增加<a href="http://brucebot.com/gallery/">我的相册</a></li>
</ul>


<p>关于网上使用jekyll的文章,有非常之多,这里就只是记录一下目前我的博客的使用方案.</p>

<p>Refer:<a href="http://brandonbohling.com/2011/08/27/Installing-Jekyll-on-Mac/">How to install Jekyll on Mac OSX</a></p>

<ol>
<li>jekyll 本地运行,用来生成静态网站</li>
<li>评论交由disqus处理</li>
<li>Mou 用来编辑markdown,写博客</li>
<li>生成博客markdown<code>rake post["post tile",category]</code>

<pre><code> #Usage: rake post["title",category]
 desc "Given a title as an argument, create a new post file"
 task :post, [:title, :category] do |t, args|
   filename = "#{Time.now.strftime('%Y-%m-%d')}-#{args[:title].gsub(/\s/, '-').downcase}.md"
   path = File.join("_post", filename)
   if File.exist? path; raise RuntimeError.new("Won't clobber #{path}"); end
   File.open(path, 'w') do |file|
     file.write &lt;&lt;-EOS
 ---
 layout: post
 categories: 
  - #{args[:category]}
 title: #{args[:title]}
 tags:
   - 
 draft: true
 date: #{Time.now.strftime('%Y-%m-%d %k:%M:%S')}
 ---
 EOS
     end
     puts "Now open #{path} in an editor."
     system "open #{path}"
  end #task rake write
</code></pre>

<p>执行这个命令后会自动生成新的文章,保存在_posts下面,并自动用Mou打开写文章了. 新的文章会有一个draft:开关，写文章时设置为<code>true</code>，则不会发表，当写完后改为<code>false</code>就会自动发表了。</p></li>
<li>生成页面 <code>rake page["title"]</code>

<pre><code>     #Usage: rake page["title"]
 desc "Given a title as an argument, create a new post file"
 task :page, :title do |t, args|
   filename = "#{args.title.gsub(/\s/, '-').downcase}.markdown"
   path = File.join("pages", filename)
   if File.exist? path; raise RuntimeError.new("Won't clobber #{path}"); end
   File.open(path, 'w') do |file|
     file.write &lt;&lt;-EOS
 ---
 layout: page
 title: #{args.title}
 date: #{Time.now.strftime('%Y-%m-%d %k:%M:%S')}
 ---
 EOS
     end
     puts "Now open #{path} in an editor."
     system "open #{path}"
  end #task rake page
</code></pre>

<p>执行这个命令后会自动生成新的文章,保存在pages下面,并自动用Mou打开写文章了.</p></li>
<li>使用<a href="http://brucebot.com/2012/03/29/automator-images-resize-and-watermark/">resize/watermark</a>的automator应用给设置图片大小和加水印效果</li>
<li>文章写好后,执行<code>rake preview</code>可以预览效果.

<pre><code> desc "Launch preview environment"
 task :preview do
   system "jekyll --rdiscount --server"
 end # task :preview
</code></pre></li>
<li>文章发布<code>rake deploy</code>

<pre><code> desc "Building the site and deploy to remote"
 task :deploy do
  system "jekyll --rdiscount &amp;&amp; rsync -avz --delete _site/ xxx@xxx.com:/home/xxx/"
 end # task :deploy
</code></pre></li>
<li>左边的Instagram照片,参考@lianxu的文章<a href="http://www.lianxu.me/blog/2011/12/21/integrate-instagram-into-octopress/">整合instagrm到jekyll</a>生成.</li>
<li>jekyll分页显示
在_config.xml里面增加一项 <code>paginate: 5</code> 5表示每页显示文章的数目然后查看:<a href="https://github.com/mojombo/jekyll/wiki/Pagination">https://github.com/mojombo/jekyll/wiki/Pagination</a> 里面选择一个代码加入到主页当中去,我是选择第二个考虑page1的.</li>
<li>自动摘要
使用10的分页显示后,因为原来的文章每有用到more的摘要功能,看起来每一页会相当长,于是加一个自动摘要的功能,这样单页显示就好看多了.从
<a href="https://github.com/MattHall/truncatehtml/blob/master/html_filters.rb">https://github.com/MattHall/truncatehtml/blob/master/html_filters.rb</a>下载<em>html_filter.rb</em>插件放入<strong>_plugin</strong>文件夹.
原始的<em>html_filter.rb</em>不支持中文,使用文本编辑器打开,找到一行代码:

<pre><code>doc = Nokogiri::HTML(Iconv.conv('ASCII//TRANSLIT//IGNORE', 'UTF8', raw))
</code></pre>

将其更改成

<pre><code>doc = Nokogiri::HTML(Iconv.conv('UTF8//TRANSLIT//IGNORE', 'UTF8', raw))
</code></pre></li>
<li>所有源码可以在github上查看,链接:<a href="https://github.com/brucebot/brucebot.com.site">https://github.com/brucebot/brucebot.com.site</a></li>
<li><a href="http://brucebot.com/gallery/">我的相册</a> 使用<a href="https://github.com/ggreer/jekyll-gallery-generator">jekyll-gallery-generator</a>搭建
-EOF-</li>
</ol>


<div class="meta">
<p><center><script type="text/javascript"><!--
google_ad_client = "ca-pub-4124873028623523";
/* 468X60 ads */
google_ad_slot = "8650352004";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></center></p>
<div class="entry-utility">
<span class="cat-links">分类: <a href="/categories/软件应用">软件应用</a></span>|
<span class="tag-links">标签:<a href="/tags/jekyll">jekyll</a> </span>
</div><!-- .entry-utility -->
</div><!-- meta -->
<br/>
<div><small>
 <ul>转载请以超链接形式注明:
 	<li>文章作者:<a href="http://brucebot.com">于仁颇黎</a></li>
 	<li>原始出处:<a href="/2012/03/blog_with_jekyll_and_markdown/">使用jekyll写博客(http://brucebot.com/2012/03/blog_with_jekyll_and_markdown/)</a></li>
 商业网站如需使用请联系:<a href=mailto:bruceboty@gmail.com>bruceboty@gmail.com</a>
</ul></small>
</div><!--copyright-->
</div><!-- entry-content -->
<div><nav class="pagination">



<a class="internal" rel="next"  href="/2012/06/lotus/" title="View 禅意荷花">禅意荷花 &raquo;</a></div>

</nav>
</div>
<br/>
<div id="related-posts">
<h3>相关文章</h3>

</div>
<br>
<div class="misc-content">
<div class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'brucebot'; 
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
</div>
</div><!-- misc-content -->
</div><!-- bd -->
</div><!-- content -->

			</div><!--entry-content-->
			</div><!--content-->
		</div><!--container -->
	</div><!-- main-->

		<div id="sidebar">	
		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<li id="sidebar-menu" class="widget-container">
					<h3 class="widget-title">菜单</h3>
  						
  						<li><a href="/categories/生活乐趣">生活乐趣</a></li>
  						
  						<li><a href="/categories/软件应用">软件应用</a></li>
  						
  						<li class="roboticsbooks"><a href="/pages/Robotics-Books.html">机器人书籍</a></li>
  						<li class="archive"><a href="/archive.html">文章归档</a></li>
						<li class="gallery"><a href="/gallery/">我的相册</a></li>
						<li class="Link"><a href="/pages/Link.html">友情链接</a></li>
						<li class="search"><a href="/pages/search.html">搜索本站</a></li>
						<li class="instagram"><a href="/instagram/">Instagram</a></li>
						<li class="about"><a href="/pages/about.html">About</a></li>
					<h3 class="widget-title">联系我</h3>
					<div class="widget_rss">
						<a href="http://feed.brucebot.com/" rel="alternate" type="application/rss+xml"><img src="/stylesheet/img/rss.png"></a>
						<a href=mailto:bruceboty@gmail.com><img src="/stylesheet/img/gmail.png"></a>
						<a href="http://twitter.com/brucebot/"><img src="/stylesheet/img/twitter.png"></a>
						<a href="http://weibo.com/brucebot/"><img src="/stylesheet/img/weibo.png"></a>
						<a href="https://plus.google.com/108534161149187220409/"><img src="/stylesheet/img/gplus.png"></a>
					</div>

					<h3 class="widget-title">最近文章</h3>
						<ul>
						
						
							<li><a href="/2012/06/lotus/">禅意荷花</a></li>
						
						
						
							<li><a href="/2012/03/blog_with_jekyll_and_markdown/">使用jekyll写博客</a></li>
						
						
					</ul>
					<!--<h3 class="widget-title">最近评论</h3>
					<script type="text/javascript" src="http://brucebot.disqus.com/recent_comments_widget.js?num_items=7&hide_avatars=1&avatar_size=24&excerpt_length=50"></script>-->
					<h3 class="widget-title">文章归档</h3>
					<ul>
					<li class="Link"><a href="/2012/">2012</a></li>
					<li class="Link"><a href="/2011/">2011</a></li>
					<li class="Link"><a href="/2010/">2010</a></li>
					<li class="Link"><a href="/2009/">2009</a></li>
					<li class="Link"><a href="/2008/">2008</a></li>
					<li class="Link"><a href="/2007/">2007</a></li>
					<li class="Link"><a href="/2006/">2006</a></li>
					<li class="Link"><a href="/2005/">2005</a></li>
					<li class="Link"><a href="/2004/">2004</a></li>
				</ul>
				    <h3 class="widget-title">博客信息</h3>
				    <ul>
				    <li>创建始于:2004/09/21/</li>	
				    <li>文章总数:2篇</li>
				    <li>主题fork自<a href="http://maikunari.com/sutra/">Sutra</a></li>
					<li>Hosted On <a href="http://www.linode.com/?r=3a7a044d481045ae2ff2f4469357779e2322f5c6/">Linode</a></li>
				    <li>Powered by<a href="https://github.com/mojombo/jekyll/">Jekyll</a> and <a href="http://www.disqus.com/">disqus</a></li>
					</ul>
				</li>
			</ul><!--xoxo-->
		</div><!-- #primary .widget-area -->
	</div><!-- #sidebar -->

	<div id="footer" role="contentinfo">
		<div id="colophon">
			<div id="site-info">
				<p>&copy; <a href="http://www.brucebot.com/" title="于仁颇黎" rel="home">
					于仁颇黎</a> <a href="/pages/about.html/">2004-2012</a></p>
			</div><!-- #site-info -->
		</div><!-- #colophon -->
	</div><!-- #footer -->	
</div><!-- page -->
</body>
</html>
